# 《MySQL手札：从Excel到生产实战》

以Excel为认知锚点，从零基础到企业级实战的完整MySQL学习路径。快速从入门到精通，覆盖MySQL 8.0核心特性、底层原理与生产实战。

**适合人群：** 零基础小白、初中级开发者、需要系统提升的工程师、准备面试的求职者  
**专栏规模：** 18讲正课 + 1讲综合实战  
**学习时长：** 10-12小时  
**专栏地址：** https://juejin.cn/column/7566434231116611624

---

## 第一模块：入门奠基篇（3讲）

### 第1讲：把MySQL当成Excel来学

用Excel类比快速建立认知。库=文件、表=Sheet、字段=列、记录=行。讲清楚MySQL解决了Excel的3大痛点：并发冲突、海量数据卡顿、数据安全。5分钟速记SQL四类语言（DDL/DML/DCL/TCL）。

**作业：** 找一个工作中的Excel文件，分析对应关系、找痛点、画出MySQL表结构

---

### 第2讲：环境搭建与数据类型设计

搭建MySQL环境（Docker/Windows/Linux三选一）。重点讲数据类型选择：金额必须用DECIMAL不能用FLOAT，字符集必须用utf8mb4支持emoji，时间推荐DATETIME不用TIMESTAMP。约束机制讲清楚主键、非空、唯一、检查、外键。

**作业：** 创建学生管理系统（student表和score表），插入测试数据

---

### 第3讲：增删改查实战

INSERT的4种方式（单条/批量/IGNORE/ON DUPLICATE KEY UPDATE）。SELECT的多种场景（WHERE条件/排序分页/聚合函数/分组统计）。UPDATE/DELETE为什么必须加WHERE。多表关联查询（INNER/LEFT/RIGHT JOIN）。常用函数速查（字符串/日期/数值）。

**作业：** 基于员工表完成10个查询（基础查询→条件查询→聚合统计→复杂查询）

---

## 第二模块：核心原理篇（7讲）

### 第4讲：窗口函数与CTE

MySQL 8.0+的现代SQL特性。窗口函数解决复杂排名问题，性能比传统方案快10倍。3种排名函数（ROW_NUMBER/RANK/DENSE_RANK）的区别。用LAG/LEAD计算环比。CTE提升SQL可读性，递归CTE查询组织树。

**作业：** 查询每部门薪资前3、计算薪资与部门平均的差距、用递归CTE查询员工的所有下属、性能对比窗口函数vs关联子查询

---

### 第5讲：事务——数据一致性的保护伞

用银行转账场景讲透ACID特性。并发三大问题（脏读/不可重复读/幻读）。四大隔离级别实战对比。undo log和redo log的作用。

**作业：** 复现脏读场景、思考MySQL为什么默认选择可重复读

---

### 第6讲：索引（上）——B+树与查询加速原理

索引为什么能避免全表扫描。B+树结构深度拆解，为什么选B+树而不是B树。InnoDB的聚簇索引和二级索引。联合索引的最左匹配原则。

**作业：** 手绘3层B+树结构、对比有无索引的查询速度、建联合索引验证最左匹配

---

### 第7讲：索引（下）——失效场景与优化实战

索引失效的12大场景（函数、类型转换、前缀模糊、最左匹配等）。索引设计最佳实践。EXPLAIN字段完整解读（type/key/rows/Extra）。

**作业：** 用EXPLAIN分析项目中的复杂SQL、修复索引失效场景、设计商品表的索引方案

---

### 第8讲：MySQL架构与存储引擎

MySQL三层架构（连接层/服务层/存储引擎层）。InnoDB存储引擎深度剖析。Buffer Pool工作机制（LRU淘汰/预读/脏页刷盘）。InnoDB vs MyISAM对比。

**作业：** 开启binlog解析日志、查询redo log和undo log位置、模拟崩溃恢复

---

### 第9讲：日志体系与MVCC并发控制

三大日志体系（redo log/undo log/binlog）。两阶段提交保证一致性。MVCC多版本并发控制详解（隐藏字段/undo log版本链/ReadView）。RC和RR的可见性判断规则。

**作业：** 解析binlog内容、验证MVCC并发修改、画出UPDATE语句的完整执行流程

---

### 第10讲：SQL执行全流程与优化器原理

SQL执行完整流程（连接器→解析器→优化器→执行器→存储引擎）。优化器的索引选择逻辑（成本模型/统计信息）。用optimizer_trace查看优化器决策过程。

**作业：** 用optimizer_trace查看索引选择、分析优化器为什么选错索引、画出复杂JOIN的执行流程

---

## 第三模块：实战优化篇（5讲）

### 第11讲：慢查询定位与全链路优化

慢查询日志配置与分析。EXPLAIN执行计划深度解读。SQL优化5大套路（分页/SELECT/JOIN/子查询/DISTINCT）。

**作业：** 用慢查询日志定位项目TOP3慢SQL、完成优化并对比性能

---

### 第12讲：并发场景优化——锁机制与死锁解决

MySQL锁机制全解析（全局锁/表级锁/行级锁）。Next-Key Lock详解。死锁产生与解决。悲观锁vs乐观锁选型。

**作业：** 模拟秒杀场景实现乐观锁和悲观锁、对比性能差异

---

### 第13讲：主从复制与读写分离架构

主从复制原理（binlog/relay log/三个线程）。主从架构搭建实战。读写分离架构设计。高可用方案简介（MHA/MGR）。

**作业：** 搭建一主一从环境、实现读写分离代码

---

### 第14讲：分库分表策略与数据迁移

分库分表的判断标准（单表1000万/单库连接数瓶颈）。分片策略详解（垂直分表/垂直分库/水平分表）。分表后的查询改造。数据备份与恢复方案。

**作业：** 设计分表方案、完成全量备份+增量备份

---

### 第15讲：数据备份恢复与高可用方案

数据备份方案全解析（mysqldump/xtrabackup/binlog增量）。数据恢复实战。高可用方案对比（主从复制/半同步复制/MGR/MHA）。

**作业：** 完成备份恢复演练、模拟误删数据恢复、制定公司项目的备份策略

---

## 第四模块：进阶精通篇（3讲）

### 第16讲：JSON字段与全文索引实战

JSON字段应用（半结构化数据存储）。JSON操作函数。JSON字段索引优化（虚拟列+索引）。全文索引解决LIKE '%keyword%'问题。中文全文索引（ngram分词）。

**作业：** 商品表用JSON存储属性、建虚拟列索引、实现站内搜索

---

### 第17讲：MySQL分区表与性能监控

MySQL分区表详解（RANGE/LIST/HASH/KEY分区）。分区vs应用层分表对比。性能监控与问题排查（SHOW STATUS/performance_schema/慢查询日志）。

**作业：** 订单表按年份RANGE分区、用performance_schema分析TOP10慢SQL、搭建性能监控看板

---

### 第18讲：生产环境最佳实践与面试高频考点

生产环境最佳实践checklist（表设计/索引设计/SQL编写/参数配置）。常见生产问题排查（慢查询激增/死锁频繁/主从延迟/连接数打满/磁盘爆满）。面试高频考点精讲。

**面试考点：** 事务ACID如何实现、MVCC原理、B+树vs B树、索引失效场景、如何防止库存超卖、主从延迟如何解决、千万级数据如何分表

**作业：** 整理公司项目的MySQL规范文档、完成面试高频考点的手写答案

---

## 第五模块：综合实战（加餐）

### 番外篇：电商订单系统数据库设计与优化全流程

需求分析与ER图设计。索引规划。查询优化实战。并发场景处理（库存扣减/订单创建）。架构升级（主从复制/缓存/分表归档）。压测与瓶颈定位。

**作业：** 基于你的业务场景，设计一套完整的数据库方案

---

## 学习路径

**零基础小白：** 第1讲 → 第18讲（10-12小时）  
**有基础开发者：** 第4讲 → 第18讲（8-9小时）  
**面试突击：** 第4/5/6/7/9/12/18讲（4-5小时）  
**架构师进阶：** 第11-15讲 + 第17-18讲 + 番外篇（6-7小时）  
**MySQL 8.0+特性：** 第4/9/16/17讲（3-4小时）
