# MySQL专栏写作规范

## 技术委员会决策机制

### 核心原则：找对应技术栈的创始人/核心贡献者审查

**为什么需要技术委员会？**
- 确保技术原理准确，不误导读者
- 验证生产方案可行，经得起实战检验
- 保证内容拆分合理，知识体系完整

### MySQL专栏技术委员会

**核心成员：**
- **Michael "Monty" Widenius (MySQL之父)**: 审查存储引擎、事务机制、技术原理准确性
- **丁奇 (阿里MySQL专家/《MySQL实战45讲》作者)**: 审查生产实战、性能优化、方案可行性  
- **姜承尧 (《MySQL技术内幕》作者)**: 审查技术深度、InnoDB内核、中文表达自然度

**分工机制：**
- **Monty**: 把关技术原理（存储引擎、MVCC、日志体系、B+树结构）
- **丁奇**: 审查生产可用性（慢查询优化、死锁解决、主从复制、分库分表）
- **姜承尧**: 检查技术深度和表达（InnoDB内核、索引原理、避免翻译腔和AI腔）

### 其他技术栈的技术委员会示例

**Java技术沉淀：**
- **James Gosling (Java之父)**: 审查Java语言特性、JVM原理
- **Doug Lea (并发大师)**: 审查并发编程、线程池、锁机制
- **周志明 (《深入理解Java虚拟机》作者)**: 审查JVM调优、GC原理、中文表达

**Redis专栏：**
- **Salvatore Sanfilippo (Redis之父)**: 审查数据结构、持久化、性能优化
- **钱文品 (《Redis设计与实现》作者)**: 审查技术深度、源码分析、中文表达

**Kafka专栏：**
- **Jay Kreps (Kafka创始人)**: 审查架构设计、分区机制、吞吐量优化
- **胡夕 (《Kafka核心技术与实战》作者)**: 审查生产实战、运维经验、中文表达

**Elasticsearch专栏：**
- **Shay Banon (ES创始人)**: 审查搜索原理、分布式架构、倒排索引
- **张超 (《Elasticsearch实战》作者)**: 审查生产实战、性能调优、中文表达

### 技术委员会审查流程

**第一步：内容拆分审查**
- 18讲的拆分是否合理？
- 知识点的递进顺序是否符合学习规律？
- 有没有遗漏核心知识点？

**第二步：技术原理审查**
- 技术原理描述是否准确？
- 有没有误导性的说法？
- 是否符合官方文档和最佳实践？

**第三步：生产实战审查**
- 方案在生产环境是否可行？
- 性能数据是否真实？
- 有没有考虑高并发、容错、扩展性？

**第四步：表达质量审查**
- 中文表达是否自然？
- 有没有AI腔和翻译腔？
- 技术术语使用是否准确？

### 审查标准

**一票否决项（任一委员提出）：**
- 技术原理错误（如MVCC原理描述错误）
- 生产方案不可行（如分库分表方案有致命缺陷）
- 误导性表述（如"索引越多越好"）

**改进建议（委员会讨论）：**
- 内容拆分优化（如某一讲内容过多，建议拆分）
- 案例补充（如缺少典型场景的实战案例）
- 表达优化（如某段话AI味太重，建议改写）

### 如何应用技术委员会机制

**写作前：**
1. 确定技术栈（如MySQL、Redis、Kafka）
2. 组建技术委员会（找对应技术的创始人/核心贡献者）
3. 提交大纲给委员会审查（18讲拆分是否合理）

**写作中：**
1. 每完成一讲，提交给委员会审查
2. 重点审查技术原理、生产方案、表达质量
3. 根据委员会反馈修改

**写作后：**
1. 全部18讲完成后，委员会整体审查
2. 检查知识体系完整性
3. 确认无技术错误和误导性表述

### 技术委员会寄语

**Monty**: "Keep it simple, keep it correct."  
**丁奇**: "生产环境见真章，数据说话。"  
**姜承尧**: "写给人看的，不是写给机器看的。"

**委员会共识**: 每个字都要让读者离解决问题更近一步，每个案例都要能直接用到生产环境。

---

## 去AI化写作要求

### 禁用的AI味表达
```
❌ "在当今互联网时代"
❌ "随着业务的发展"
❌ "众所周知"
❌ "不难发现"
❌ "值得注意的是"
❌ "综上所述"
❌ "首先...其次...最后..."（机械式排比）
❌ "让我们来看看"
❌ "接下来我们将..."
```

### 推荐的人话表达
```
✅ 直接说问题："订单表查询慢，扫了200万行"
✅ 用数据说话："优化后QPS从800提到3200"
✅ 说人话："这个索引没用上，因为用了函数"
✅ 直接给结论："别在WHERE里用函数，会导致索引失效"
✅ 用口语化过渡："再看个例子" "问题来了" "怎么办"
```

### 段落风格要求
- 每段开头直接说重点，不铺垫
- 多用短句，少用长句
- 技术术语第一次出现时用括号解释，后续直接用
- 代码和文字穿插，不要大段堆砌

---

## MySQL专栏核心关注点

### 必讲技术点
1. **存储引擎**: InnoDB架构、Buffer Pool、Change Buffer
2. **事务**: ACID、隔离级别、MVCC、锁机制
3. **索引**: B+树、聚簇索引、覆盖索引、索引下推
4. **查询优化**: 执行计划、统计信息、优化器行为
5. **主从复制**: binlog、GTID、延迟问题
6. **性能调优**: 慢查询、参数配置、监控指标

### 性能指标标准
每个优化案例必须包含：
- **QPS/TPS**: 优化前后对比
- **响应时间**: P50/P95/P99
- **扫描行数**: EXPLAIN的rows字段
- **CPU/内存**: 资源占用变化
- **慢查询时间**: 具体到毫秒

### 典型场景库
- 电商订单表（分页查询、状态更新）
- 用户表（登录验证、信息查询）
- 商品库存表（高并发扣减）
- 日志表（大数据量写入、归档）
- 关联查询（订单+用户+商品）

---

## 写作铁律

### 1. 结构固定（5部分）
```markdown
## 这一讲解决什么问题
一句话 + 3个知识点 + 能做什么

## 核心内容
### 概念（一句话定义）
### 原理（配图 + 200字内）
### 实战（完整案例）
### 避坑（3-5个）

## 实战案例
**场景**: 具体业务场景
**问题**: 慢查询/死锁/主从延迟等
**分析**: EXPLAIN/SHOW命令输出
**方案**: 具体优化步骤
**效果**: 前后数据对比
**套路**: 可复用的方法论

## 避坑指南
⚠️ 坑点 + 错误示例 + 正确做法 + 原因

## 作业
基础题 + 进阶题 + 提交要求
```

### 2. 篇幅控制
- **目标**: 3500-4500字，阅读15-20分钟
- **硬上限**: 5000字（超了必须拆）
- **精简原则**: 
  - 删掉所有"众所周知""显而易见"
  - 一个概念不超过150字
  - 一个案例不超过500字
  - 能用表格就不用文字

### 3. 代码规范
```sql
-- ✅ 好的示例：有注释、有上下文、能直接运行
-- 创建订单表
CREATE TABLE orders (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id BIGINT NOT NULL,
  status TINYINT NOT NULL DEFAULT 0, -- 0:待支付 1:已支付 2:已完成
  created_at DATETIME NOT NULL,
  INDEX idx_user_status (user_id, status)
) ENGINE=InnoDB;

-- 查询某用户的待支付订单
SELECT id, created_at 
FROM orders 
WHERE user_id = 10001 AND status = 0;

-- ❌ 差的示例：无注释、参数不明、无法运行
select * from t where a=1;
```

### 4. 可视化要求
每讲至少1个，标注清楚：

```markdown
<!-- 🎨 需要画图：B+树结构 -->
<!-- 📸 需要截图：EXPLAIN执行计划，标注type/key/rows -->
<!-- 📋 需要表格：隔离级别对比 -->
```

**图的质量标准**:
- 节点文字≤8个字
- 流程清晰，不超过12个节点
- 关键路径用颜色标注
- 必须配文字说明

---

## 内容合理性检查

### 技术准确性（Monty审查）
- [ ] SQL语法正确，能在MySQL 8.0运行
- [ ] 原理描述符合官方文档
- [ ] 存储引擎行为描述准确
- [ ] 事务/锁机制无误导

### 生产可用性（Jeremy审查）
- [ ] 性能数据真实（不能编造）
- [ ] 方案考虑了高并发场景
- [ ] 有回滚方案和风险提示
- [ ] 监控和排查手段完整
- [ ] 适用范围和限制明确

### 表达自然度（姜承尧审查）
- [ ] 无AI腔调（检查禁用词）
- [ ] 技术术语使用准确
- [ ] 中文表达流畅自然
- [ ] 代码注释清晰易懂
- [ ] 过渡自然，不生硬

---

## 常见坑点库（MySQL专用）

### 索引类
1. WHERE条件用了函数导致索引失效
2. 隐式类型转换导致全表扫描
3. 联合索引顺序不对
4. 索引区分度太低
5. 回表代价太高，优化器放弃索引

### 事务类
1. 长事务导致锁等待
2. 死锁场景（更新顺序不一致）
3. 隔离级别选择不当
4. 大事务导致主从延迟
5. 事务未提交占用连接

### 查询类
1. SELECT * 查询不必要字段
2. 深分页性能差（LIMIT 100000,10）
3. IN条件值过多
4. 子查询性能差
5. JOIN表过多

### 配置类
1. innodb_buffer_pool_size设置不当
2. max_connections过小
3. binlog未开启或格式不对
4. 慢查询阈值设置不合理
5. 连接池配置不当

---

## 写作流程（2小时完成）

### 第1步：定主题（10分钟）
```
1. 这一讲解决什么核心问题？（一句话）
2. 读者能学到哪3个知识点？
3. 准备什么实战案例？（真实场景）
4. 需要什么图？（架构图/流程图/对比表）
5. 有哪些坑要提醒？（至少3个）
```

### 第2步：写案例（40分钟）
先写实战案例，再补原理：
1. 描述业务场景（订单/用户/商品等）
2. 贴出问题SQL和EXPLAIN结果
3. 分析问题原因（索引/锁/配置等）
4. 给出优化方案（SQL改写/加索引/调参数）
5. 贴出优化后的数据对比
6. 总结可复用的套路

### 第3步：补原理（30分钟）
1. 一句话定义核心概念
2. 画图说明原理（B+树/MVCC/锁等）
3. 200字内讲清楚机制
4. 标注可视化需求（🎨📸📋）

### 第4步：整理避坑（20分钟）
1. 列出3-5个常见错误
2. 每个坑给出：错误示例 → 正确做法 → 原因
3. 补充监控和排查命令

### 第5步：自查（20分钟）
对照检查清单：
- [ ] 字数3500-5000？
- [ ] 结构完整？
- [ ] SQL能运行？
- [ ] 有性能数据？
- [ ] 有可视化标注？
- [ ] 无AI腔调？
- [ ] 技术准确？

---

## 质量红线（触碰重写）

🔴 **技术错误**: SQL语法错、原理错、数据造假
🔴 **不能运行**: SQL无法执行、步骤不清、缺少环境说明
🔴 **无性能数据**: 优化案例没有前后对比
🔴 **AI腔调重**: 出现3个以上禁用词
🔴 **结构残缺**: 缺案例/缺图/缺避坑/缺作业
🔴 **篇幅失控**: 超5000字或低于3000字

---

## 自查清单

### 开始写作前
- [ ] 确定了核心问题和3个知识点
- [ ] 准备了真实业务场景
- [ ] 列出了3-5个坑点
- [ ] 明确了需要的图表类型

### 写作过程中
- [ ] 每500字检查一次是否有AI腔
- [ ] 每个SQL都加了注释
- [ ] 每个优化都有数据对比
- [ ] 标注了可视化需求

### 完成后
- [ ] 字数在3500-5000之间
- [ ] SQL在MySQL 8.0能运行
- [ ] 无禁用词（AI腔）
- [ ] 有完整的实战案例
- [ ] 有性能数据对比
- [ ] 有可视化标注
- [ ] 有避坑指南
- [ ] 有作业

---

## 委员会寄语

**Monty**: "Keep it simple, keep it correct."  
**丁奇**: "生产环境见真章，数据说话。"  
**姜承尧**: "写给人看的，不是写给机器看的。"

**共识**: 每个字都要让读者离解决问题更近一步，每个案例都要能直接用到生产环境。
